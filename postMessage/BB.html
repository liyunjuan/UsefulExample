<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>XDM（跨文档消息传递）</title>
</head>
<body>
    <h1>我是新窗口</h1>
    <p>我接收到来自源窗口的数据为：<span id="msg" style="color: red;"></span></p>
<script>
    window.opener.postMessage('true', 'http://localhost:63342/UsefulExample/postMessage/AA.html');//发送一个数据给源窗口，用于判断通过open打开的窗口是否装载完成。
        //监听看有没有数据发送过来
    window.addEventListener('message',function(e) {
        console.log(222)
        console.log(e)
        if(e.origin !== "http://localhost:63342"){ // 判断数据发送方是否是可靠的地址
                return
        }
        console.log(e);//打印接收到的数据对象
        document.getElementById('msg').innerHTML = e.data;
    })
    console.log(localStorage.getItem('AAA'))
</script>
</body>
</html>
